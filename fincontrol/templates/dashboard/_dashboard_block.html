<div style="display:flex; gap:20px; margin-bottom:20px; flex-wrap: wrap;">
    <div style="flex:1; min-width:200px; background:#ecf0f1; padding:15px; border-radius:8px; text-align:center;">
        <h3 style="margin:0; font-size:1.1em; color:#2c3e50;">Доход</h3>
        <p style="font-size:1.6em; color:green; margin:5px 0 0;">
            {{ total_income|floatformat:2 }}
        </p>
    </div>
    <div style="flex:1; min-width:200px; background:#ecf0f1; padding:15px; border-radius:8px; text-align:center;">
        <h3 style="margin:0; font-size:1.1em; color:#2c3e50;">Расход</h3>
        <p style="font-size:1.6em; color:red; margin:5px 0 0;">
            {{ total_expense|floatformat:2 }}
        </p>
    </div>
    <div style="flex:1; min-width:200px; background:#ecf0f1; padding:15px; border-radius:8px; text-align:center;">
        <h3 style="margin:0; font-size:1.1em; color:#2c3e50;">Баланс</h3>
        <p style="font-size:1.6em; margin:5px 0 0; color:{% if balance >= 0 %}green{% else %}red{% endif %};">
            {{ balance|floatformat:2 }}
        </p>
    </div>
</div>

{% if fig_line %}
    <div style="margin-bottom: 40px;">{{ fig_line|safe }}</div>
{% else %}
    <p style="color:#7f8c8d;">Нет данных для графика динамики.</p>
{% endif %}

{% if fig_pie %}
    <div style="margin-bottom: 40px;">{{ fig_pie|safe }}</div>
{% else %}
    <p style="color:#7f8c8d;">Нет данных для круговой диаграммы.</p>
{% endif %}

{% if fig_bar %}
    <div>{{ fig_bar|safe }}</div>
{% else %}
    <p style="color:#7f8c8d;">Нет данных для топа подкатегорий.</p>
{% endif %}
